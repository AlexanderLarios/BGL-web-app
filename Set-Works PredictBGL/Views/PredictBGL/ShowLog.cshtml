
@{
    ViewBag.Title = "ShowLog";
}

<h2>ShowLog</h2>

<table id="records_table" border='1'>
    <tr>
        <th align="center" width="50">log_id</th>
        <th align="center" width="100">user_id</th>
        <th align="center" width="100">logtype_id</th>
        <th align="center" width="100">other</th>
        <th align="center" width="150">time</th>
        <th align="center" width="100">value</th>
        <th align="center" width="300">notes</th>
    </tr>
</table>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            /*var d = new Date,
               dformat = [(d.geUTCtMonth() + 1).padLeft(),
                          d.getUTCDate().padLeft(),
                          d.getUTCFullYear()].join('-') + ' ' +
                         [d.getUTCHours().padLeft(),
                          d.getUTCMinutes().padLeft(),
                          d.getUTCSeconds().padLeft()].join(':');
            */
            $.ajax({
                    
                    url: 'https://www.PredictBGL.com/api/1.0/extract?',
                    method: 'Get',
                    ContentType: 'multipart/form-data',
                    dataType: 'JSON',
                    data: {
                        token: sessionStorage.getItem("Token"),
                        start_date:'2017-10-01 00:00:00',
                        end_date:'2017-11-15 00:00:00',
                    },
                    success: function (response) {
                        if (response.result == true) {
                            {
                                console.log(response);
                                var trHTML = '';
                                var data = response.logs;
                                for (var i = 0; i < data.length; i++) {
                                    trHTML +=
                                    '<tr><td>' + data[i].log_id +
                                    '</td><td>' + data[i].user_id +
                                    '</td><td>' + data[i].logtype_id +
                                    '</td><td>' + data[i].other +
                                    '</td><td>' + data[i].time +
                                    '</td><td>' + data[i].value +
                                    '</td><td>' + data[i].notes +
                                    '</td></tr>';
                                };
                                $('#records_table').append(trHTML);
                            }
                        }
                        else
                            alert(response.message);
                    },
                    // Display errors if any in the Bootstrap alert <div>
                    error: function (jqXHR) {
                        $('#divErrorText').text(jqXHR.responseText);
                        $('#divError').show('fade');
                    }
                });
            });
    </script>
}